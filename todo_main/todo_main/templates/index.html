{% load static %}

<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% block title %}
            TODO
        {% endblock %}
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
    crossorigin="anonymous">

</head>
{% block body-txt %}
    <body>
    
        {% block navbar %}

            <nav class="navbar navbar-expand-lg bg-body-tertiary ">
                <div class="container-fluid ">
                    <a class="navbar-brand" href="/todo/">TODO</a>
                </div>

                {% if user.is_authenticated %}
                    <div class = "mr-2">
                        <a href = "{% url 'logout_page' %}" class="btn btn-outline-danger m-2" type="submit">Logout</a>
                    </div>
                {% else %}
                    <div class = "mr-2">
                        <a href = "{% url 'login_page'%}" class="btn btn-outline-primary m-2" type="submit">Login</a>
                    </div>
                {% endif %}
        
            </nav>
        {% endblock %}

        {{request.user}}

        <div class = "m-5">

            <table class="table table-striped">

                <thead>
                    <tr>
                        <th scope="col"> Serial No. </th>
                        <th scope="col"> Task title </th>
                        <th scope="col"> Action </th>
                    </tr>
                </thead>

                <tbody>

                    {% for t in queryset %}

                        <tr>

                            <th scope="row">{{forloop.counter}}</th>
                            <td>
                                <a href="{% url "task_detail" t.task_id.task_id %}">
                                    {{t.todo_title}}
                                </a>
                            </td>
                            <td>
                                <form method = "POST" action="{% url "delete_task" t.task_id.task_id %}", style = "display:inline">
                                    {% csrf_token %}
                                    <div>
                                        <button type = "submit" class = "btn btn-outline-danger"> Delete </button>
                                    </div>
                                </form>
                            </td>

                        </tr>

                    {% endfor %}

                </tbody>

            </table>

        </div>

        <div class = "m-5">

            <a class = "btn btn-primary" href="{% url "add_task" %}"> Add Task </a>

        </div>

    </body>

{% endblock %}

</html>